<p-toast></p-toast>
<div class="cart-wrapper">
  <div class="cart-site container">
    <div class="cart-title">
      <h2 class="cart-title__text">Giỏ hàng của bạn</h2>
    </div>
    <div *ngIf="carts.length !== 0" class="cart-content grid">
      <div class="cart-table lg:col-8 md:col-12 sm:col-12">
        <div class="cart-number-item">
          <p class="cart-number-item__text">
            Bạn đang có <b>{{ totalQuantity }} sản phẩm</b> trong giỏ hàng
          </p>
        </div>
        <ul class="cart-list">
          <li *ngFor="let item of carts" class="cart-item">
            <span
              ><img
                src="https://product.hstatic.net/200000271661/product/6_da7b88aa791e4ea9a4d1bf90e7588a66_medium.png"
                alt=""
            /></span>
            <div class="cart-item__infor">
              <p class="cart-item__infor-name">
                {{ item.product.name }}
              </p>
              <p class="cart-item__infor-price">
                {{ item.product.price | currency: "VND" }}
              </p>
              <div class="flex justify-content-between">
                <div class="cart-item__infor-quantity">
                  <button
                    (click)="updateQuantity(inputQuantityElement, item, '-')"
                    class="btn-qty"
                  >
                    -
                  </button>
                  <input
                    type="text"
                    class="cart-item__infor-quantity-value"
                    onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                    maxlength="3"
                    value="{{ item.quantity }}"
                    #inputQuantityElement
                    (input)="updateQuantity(inputQuantityElement, item, '')"
                  />
                  <button
                    (click)="updateQuantity(inputQuantityElement, item, '+')"
                    class="btn-qty"
                  >
                    +
                  </button>
                </div>
                <span class="cart-item__infor-total"
                  >Thành tiền:
                  <b>{{
                    calcPriceDiscount(
                      item.product.price,
                      item.product.discount
                    ) * item.quantity | currency: "VND"
                  }}</b>
                </span>
              </div>

              <a (click)="remove(item)" class="cart-item__remove">
                <i class="pi pi-trash cart-item__remove-icon"></i>
              </a>
            </div>
          </li>
        </ul>
        <div class="cart-note">
          <div class="cart-note__title">Ghi chú đơn hàng</div>
          <div class="cart-note__content">
            <textarea
              rows="5"
              cols="30"
              pInputTextarea
              [autoResize]="true"
            ></textarea>
          </div>
        </div>
      </div>
      <div class="cart-total lg:col-4 md:col-12 sm:col-12">
        <div class="cart-total-box">
          <div class="cart-total__title">Thông tin đơn hàng</div>
          <div class="cart-total__value">
            <span class="cart-total__value-name">Tổng tiền:</span>
            <span class="cart-total__value-number">{{
              totalCart | currency: "VND"
            }}</span>
          </div>
          <div class="cart-total__desc">
            Phí vận chuyển sẽ được tính ở trang thanh toán. Bạn cũng có thể nhập
            mã giảm giá ở trang thanh toán.
          </div>
          <div class="cart-total__action">
            <button class="btn-action">THANH TOÁN</button>
            <a
              [routerLink]="['/product']"
              class="btn-action btn-continue-shopping"
            >
              Tiếp tục mua hàng
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
